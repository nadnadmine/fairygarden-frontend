<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1440">
  <title>Checkout - Fairy Garden</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Metal&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- CSS Global + Checkout -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="checkout.css">
</head>

<body>
  <!-- ========== HEADER DAN AUTH ========= -->
  <div id="header-container"></div>
  <div id="auth-container"></div>

  <!-- ========== LOAD HEADER ========== -->
  <script>
    fetch("header.html")
      .then(res => res.text())
      .then(html => {
        document.getElementById("header-container").innerHTML = html;

        // User icon logic
        const userIcon = document.querySelector(".fa-user").parentElement;
        if (userIcon) {
          userIcon.addEventListener("click", function (e) {
            e.preventDefault();

            const loggedIn = localStorage.getItem("isLoggedIn") === "true";

            if (loggedIn) {
              window.location.href = "profile.html";
            } else {
              document.getElementById("loginModal").classList.add("show");
            }
          });
        }

        // Dropdowns
        const dropdowns = document.querySelectorAll(".dropdown");
        dropdowns.forEach(dd => {
          dd.addEventListener("mouseenter", () => {
            dd.querySelector(".dropdown-menu").style.display = "block";
          });
          dd.addEventListener("mouseleave", () => {
            dd.querySelector(".dropdown-menu").style.display = "none";
          });
        });
      });
  </script>

  <!-- ========== LOAD MODAL AUTH ========== -->
  <script>
    fetch("modal-auth.html")
      .then(res => res.text())
      .then(html => {
        const container = document.getElementById("auth-container");
        container.innerHTML = html;

        // Jalankan semua <script> yg ada di modal-auth.html
        const scripts = container.querySelectorAll("script");
        scripts.forEach(oldScript => {
          const newScript = document.createElement("script");
          newScript.textContent = oldScript.textContent;
          document.body.appendChild(newScript);
        });
      });
  </script>

  <!-- ===== CHECKOUT SECTION ===== -->
  <div class="checkout-container">
    <!-- LEFT SIDE -->
    <div class="checkout-left">
      <h3>Delivery</h3>
      <input type="text" placeholder="Alamat Pengiriman" id="address">
      <div class="row">
        <input type="text" placeholder="Provinsi" id="province">
        <input type="text" placeholder="Kode Pos" id="postalCode">
      </div>
      <input type="text" placeholder="Nomor Telepon Penerima/Nomor WhatsApp" id="receiverPhone">

      <h3>Delivery Information</h3>
<textarea id="checkoutAdditional" placeholder="Tambahkan catatan (opsional)"></textarea>

      <h3>Payment</h3>
      <p class="muted">Semua transaksi aman dan terenkripsi.</p>

      <div class="payment-box">
        <label for="qris">
          <span>QRIS</span>
          <input type="radio" name="payment" id="qris">
        </label>
      </div>

      <!-- QRIS Detail (hidden by default) -->
      <div class="qris-detail" id="qrisDetail">
        <p>Silakan scan kode QR berikut untuk menyelesaikan pembayaran:</p>
        <img src="https://i.pinimg.com/1200x/75/d7/06/75d706845313003903984e0a6c0aa7b2.jpg" alt="QRIS Code" class="qris-img">
        <button class="btn-hide" id="hideQris">Tutup QR</button>
      </div>

      <button class="btn-pay" id="payNow">PAY NOW</button>
    </div>

    <!-- RIGHT SIDE -->
    <div class="checkout-right">
      <div id="checkoutItems"></div>

      <div class="checkout-summary">
        <div class="summary-row">
          <span>Subtotal</span>
          <span id="subtotal">Rp. 0</span>
        </div>
        <div class="summary-row">
          <span>DELIVERY</span>
          <span id="delivery">Rp. 25.000</span>
        </div>
        <div class="summary-row">
          <span>Handling & Service</span>
          <span id="service">Rp. 10.000</span>
        </div>
        <div class="summary-row total">
          <span>TOTAL</span>
          <span id="total">Rp. 0</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== FOOTER ===== -->
  <footer>
    <p><b>YOU CAN FIND US ON</b></p>
    <p><i class="fa-brands fa-instagram"></i> @fairygarden &nbsp;&nbsp;
       <i class="fa-regular fa-envelope"></i> fairygarden@gmail.com</p>
  </footer>

  <script src="checkout.js"></script>
</body>
</html>